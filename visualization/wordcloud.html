<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subject Line Word Cloud Analysis</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- D3.js and D3 Cloud for visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-cloud@1.2.5/build/d3.layout.cloud.min.js"></script>
    <style>
        body { font-family: "Inter", sans-serif; }
        /* Style for the SVG container */
        #word-cloud-container {
            width: 100%;
            /* Maintain a nice aspect ratio */
            aspect-ratio: 16 / 9; 
        }
        /* Hover effect for words */
        .word:hover {
            cursor: pointer;
            fill: #1d4ed8; /* Darker blue on hover */
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-5xl bg-white shadow-2xl rounded-3xl p-6 md:p-12">
        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800 text-center mb-2">
            Top 100 Subject Keywords
        </h1>
        <p class="text-center text-gray-500 mb-8">
            Word size reflects frequency (Min: 20px, Max: 100px)
        </p>

        <!-- Container for the Word Cloud SVG -->
        <div id="word-cloud-container" class="border-4 border-indigo-300 rounded-xl bg-indigo-50">
            <!-- The SVG will be drawn here by D3 -->
        </div>

        <div id="info-box" class="mt-8 p-4 bg-gray-50 border-l-4 border-indigo-500 text-gray-700 rounded-md">
            Click on any word to display its calculated size.
        </div>
    </div>

    <script>
        // Data generated by your Python script (gword.js content)
        const gword = [
            {text: 'sakai', size: 100}, 
            {text: 'with', size: 37}, 
            {text: 'tool', size: 36}, 
            {text: 'error', size: 33}, 
            {text: 'webdav', size: 33}, 
            {text: 'resources', size: 29}, 
            {text: 'problems', size: 29}, 
            {text: 'mysql', size: 27}, 
            {text: 'changes', size: 26}, 
            {text: 'user', size: 25}, 
            {text: 'maven', size: 25}, 
            {text: 'file', size: 25}, 
            {text: 'site', size: 24}, 
            {text: 'problem', size: 24}, 
            {text: 'message', size: 24}, 
            {text: 'from', size: 24}, 
            {text: 'course', size: 24}, 
            {text: 'working', size: 24}, 
            {text: 'oracle', size: 23}, 
            {text: 'tools', size: 23}, 
            {text: 'into', size: 23}, 
            {text: 'content', size: 23}, 
            {text: 'email', size: 22}, 
            {text: 'question', size: 22}, 
            {text: 'workspace', size: 22}, 
            {text: 'melete', size: 22}, 
            {text: 'feature', size: 22}, 
            {text: 'broken', size: 22}, 
            {text: 'gradebook', size: 22}, 
            {text: 'update', size: 22}, 
            {text: 'password', size: 22}, 
            {text: 'forgotten', size: 22}, 
            {text: 'profile', size: 22}, 
            {text: 'james', size: 22}, 
            {text: 'rutgers', size: 22}, 
            {text: 'accessservlet', size: 22}, 
            {text: 'aliases', size: 22}, 
            {text: 'unexpectedly', size: 22}, 
            {text: 'taken', size: 22}, 
            {text: 'portalxlogin', size: 22}, 
            {text: 'samigo', size: 22}, 
            {text: 'center', size: 22}, 
            {text: 'version', size: 22}, 
            {text: 'eclipse', size: 22}, 
            {text: 'view', size: 22}, 
            {text: 'sites', size: 21}, 
            {text: 'upload', size: 21}, 
            {text: 'mail', size: 21}, 
            {text: 'creating', size: 21}, 
            {text: 'missing', size: 21}, 
            {text: 'jforum', size: 21}, 
            {text: 'developers', size: 21}, 
            {text: 'page', size: 21}, 
            {text: 'preferences', size: 21}, 
            {text: 'portal', size: 21}, 
            {text: 'status', size: 21}, 
            {text: 'files', size: 21}, 
            {text: 'syllabus', size: 21}, 
            {text: 'adding', size: 21}, 
            {text: 'configuration', size: 20}, 
            {text: 'desktop', size: 20}, 
            {text: 'permissions', size: 20}, 
            {text: 'connection', size: 20}, 
            {text: 'building', size: 20}, 
            {text: 'worksite', size: 20}, 
            {text: 'apis', size: 20}, 
            {text: 'using', size: 20}, 
            {text: 'visual', size: 20}, 
            {text: 'basic', size: 20}, 
            {text: 'different', size: 20}, 
            {text: 'importing', size: 20}, 
            {text: 'option', size: 20}, 
            {text: 'information', size: 20}, 
            {text: 'settings', size: 20}, 
            {text: 'memory', size: 20}, 
            {text: 'related', size: 20}, 
            {text: 'system', size: 20}, 
            {text: 'production', size: 20}, 
            {text: 'list', size: 20}, 
            {text: 'staleobjectstateexception', size: 20}, 
            {text: 'updating', size: 20}, 
            {text: 'server', size: 20}, 
            {text: 'default', size: 20}, 
            {text: 'extending', size: 20}, 
            {text: 'javaxsqlbasedatasource', size: 20}, 
            {text: 'sakaiiframemyworkspace', size: 20}, 
            {text: 'collab', size: 20}, 
            {text: 'code', size: 20}, 
            {text: 'section', size: 20}, 
            {text: 'test', size: 20}, 
            {text: 'users', size: 20}, 
            {text: 'time', size: 20}, 
            {text: 'tags', size: 20}, 
            {text: 'help', size: 20}, 
            {text: 'through', size: 20}, 
            {text: 'under', size: 20}, 
            {text: 'build', size: 20}, 
            {text: 'documentation', size: 20}, 
            {text: 'ldap', size: 20}, 
            {text: 'wiki', size: 20} 
        ];

        function drawWordCloud(words, targetElement) {
            const container = d3.select(targetElement);
            const width = container.node().clientWidth;
            const height = container.node().clientHeight || (width * 9 / 16);

            container.select("svg").remove();

            const svg = container.append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", `translate(${width / 2},${height / 2})`);

            const fill = d3.scaleOrdinal(d3.schemePaired); // Use a colorful scheme
            
            if (!words || words.length === 0) {
                console.error("No data found in 'gword'.");
                return;
            }

            const layout = d3.layout.cloud()
                .size([width, height])
                .words(words.map(d => ({ text: d.text, size: d.size })))
                .fontSize(d => d.size) 
                .rotate(() => (Math.random() > 0.8 ? 90 : 0)) 
                .padding(4)
                .on("end", (data) => {
                    svg.selectAll("text")
                        .data(data)
                        .enter().append("text")
                        .attr("class", "word transition-colors duration-200")
                        .style("font-size", d => `${d.size}px`)
                        .style("fill", (d, i) => fill(i))
                        .attr("text-anchor", "middle")
                        .attr("transform", d => `translate(${d.x},${d.y})rotate(${d.rotate})`)
                        .text(d => d.text)
                        // Add interactivity to show details
                        .on("click", function(event, d) {
                            const infoBox = document.getElementById('info-box');
                            infoBox.innerHTML = `Keyword: <span class="font-bold text-indigo-700">${d.text}</span> | Calculated Size: <span class="font-bold text-indigo-700">${Math.round(d.size)}px</span>`;
                        });
                });

            layout.start();
        }

        // --- Initialization and Responsiveness ---

        // Draw the cloud once the window loads
        window.onload = () => {
            drawWordCloud(gword, "#word-cloud-container");
        };

        // Redraw the cloud whenever the window is resized to make it responsive
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            // Throttle resize events to improve performance
            resizeTimer = setTimeout(() => {
                drawWordCloud(gword, "#word-cloud-container");
            }, 250);
        });

    </script>

</body>
</html>